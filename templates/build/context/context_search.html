{% extends 'base-derk.html' %}
{% load static %}

{% block title_block %}
Context
{% endblock %}

{% block body_block %}

<div class="container-fluid">
    <div class="row justify-content-center align-items-center py-4">
        <div class="col-12 col-lg-9 col-xl-10">
            <div class="card">
                <div class="card-body m-4">
                    <h2 class="mb-5 pb-2 pb-md-0 mb-md-4">Context Products</h2>

                    <hr>

                    <div class="tab-content">
                        <!-- Investigation Tab -->
                        <div class="col-md-12 tab-pane fade show active" id="con_inv" role="tabpanel">
                            <p> To begin, select an investigation product below to associate with your bundle. Investigations serve as the top level of the context system and will associate your bundle with a larger project.</br> <strong>Investigations are categorized as:</strong> Individual Investigations, Missions, Field Campaigns, Observing Campaigns, or Other Investigations. Selecting an investigation will pare down the list of components to the ones that go with that investigation (i.e., associated instruments, targets, etc.).</p>
                            <p>If you have a new investigation or cannot find your investigation in the pull-down selector, you should contact the ATM node using the Contact button below.</p>
                            
                            <form class="card-body" id="form_investigation" method="post" action="{% url 'build:context_search_investigation' bundle.pk  %}">
                                {% csrf_token %}
                                {{ form_investigation }}
                                {{ form.errors }}
                                {{ form.non_field_errors }}
                                <div class="d-flex">
                                    <input type="submit" class="btn btn-light text-light mt-4" value="Submit"/>
                                    <input type="button" class="btn btn-light text-light mt-4 ms-auto" data-bs-toggle="modal" data-bs-target="#contactModal" value="Contact">
                                </div>

                                <!-- Contact Modal -->
                                <div class="modal fade" id="contactModal" tabindex="-1" role="dialog" aria-labelledby="contactModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="contactModalLabel">Send a Message to ELSA</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                    <form role="form" action="" method="post" autocomplete="off">
                                                        <p>Please describe the context product you need. An ATM node representative will contact you to finalize what you need before officially submitting to the PDS system.</p>
                                                        {% csrf_token %}
                                                        {% for field in form %}
                                                            <div class="fieldWrapper">
                                                                {{ field.errors }}
                                                                {{ field.label_tag }} {{ field }}
                                                            </div>
                                                        {% endfor %}
                                                        {{ contact_form.as_p }}
                                                        <button type="submit" class="btn btn-default">Send message</button>
                                                    </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}